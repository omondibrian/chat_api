{"version":3,"sources":["../src/app.js"],"names":["app","minioBucket","get","req","res","minio","getObject","decodeURIComponent","params","name","stream","pipe","use","AuthRoutes","verify","ChatsRoutes"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AAIA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;AAPA,IAAMA,GAAG,GAAG,0BAAZ,C,CAEA;;AAMA,IAAMC,WAAW,GAAG,eAApB;AAEAD,GAAG,CAACE,GAAJ,CAAQ,gBAAR;AAAA;AAAA;AAAA;AAAA;AAAA,0BAA0B,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACF,uBADE;;AAAA;AAChBC,YAAAA,KADgB;AAAA;AAAA,mBAEDA,KAAK,CAACC,SAAN,CACnBL,WADmB,EAEnBM,kBAAkB,CAACJ,GAAG,CAACK,MAAJ,CAAWC,IAAZ,CAFC,CAFC;;AAAA;AAEhBC,YAAAA,MAFgB;AAMpBA,YAAAA,MAAM,CAACC,IAAP,CAAYP,GAAZ;;AANoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA1B;;AAAA;AAAA;AAAA;AAAA,K,CAQA;;AAEAJ,GAAG,CAACY,GAAJ,CAAQ,oBAAR,E,CAEA;;AACAZ,GAAG,CAACY,GAAJ,CAAQ,uBAAR;AACAZ,GAAG,CAACY,GAAJ,CAAQ,WAAR,EAAqBC,gBAArB;AACAb,GAAG,CAACY,GAAJ,CAAQ,YAAR,EAAsBE,sBAAtB,EAA8BC,gBAA9B;eAEef,G","sourcesContent":["import express, { json } from \"express\";\nconst app = express();\n\n//import custom routes\nimport AuthRoutes from \"./routes/auth.routes\";\nimport cors from \"cors\";\nimport ChatsRoutes from \"./routes/chat.routes\";\nimport verify from \"./middleware/verfyToken.middleware\";\nimport { initMinIO } from \"./misc/minio\";\nconst minioBucket = \"image-storage\";\n\napp.get(\"/uploads/:name\", async (req, res) => {\n    const minio = await initMinIO();\n    const stream = await minio.getObject(\n      minioBucket,\n      decodeURIComponent(req.params.name)\n      );\n      stream.pipe(res);\n    });\n//middlewares\n\napp.use(json());\n\n//route middleware\napp.use(cors());\napp.use(\"/api/user\", AuthRoutes);\napp.use(\"/api/chats\", verify, ChatsRoutes);\n\nexport default app;"],"file":"app.js"}