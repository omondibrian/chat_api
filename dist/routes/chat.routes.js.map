{"version":3,"sources":["../../src/routes/chat.routes.js"],"names":["router","storage","destination","req","file","cb","filename","Date","now","originalname","filefilter","mimetype","upload","fileFilter","get","getChats","post","single","blocked","makeNewChat","deleteSingleConversation","getSingleChat","deleteSingleChat","put","likeChat","markAsRead"],"mappings":";;;;;;;;;;;;;AAMA;;AAGA;;AACA;;AACA;;;;;;;;AAXA;;;;;AAOA,IAAMA,MAAM,GAAG,sBAAf;AAeA,IAAMC,OAAO,GAAG,yBAAY;AAC1BC,EAAAA,WAAW,EAAE,qBAACC,GAAD,EAAMC,IAAN,EAAYC,EAAZ,EAAmB;AAC9BA,IAAAA,EAAE,CAAC,IAAD,EAAO,UAAP,CAAF;AACD,GAHyB;AAI1BC,EAAAA,QAAQ,EAAE,kBAACH,GAAD,EAAMC,IAAN,EAAYC,EAAZ,EAAmB;AAC3BA,IAAAA,EAAE,CAAC,IAAD,EAAOE,IAAI,CAACC,GAAL,KAAa,GAAb,GAAmBJ,IAAI,CAACK,YAA/B,CAAF;AACD;AANyB,CAAZ,CAAhB;;AAQA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACP,GAAD,EAAMC,IAAN,EAAYC,EAAZ,EAAmB;AACpC,MAAID,IAAI,CAACO,QAAL,KAAkB,YAAlB,IAAkCP,IAAI,CAACO,QAAL,KAAkB,WAAxD,EAAqE;AACnEN,IAAAA,EAAE,CAAC,IAAD,EAAO,IAAP,CAAF;AACD,GAFD,MAEO;AACLA,IAAAA,EAAE,CAAC,IAAD,EAAO,KAAP,CAAF;AACD;AACF,CAND;AAQA;;;AACA,IAAMO,MAAM,GAAG,wBAAO;AACpBX,EAAAA,OAAO,EAAEA,OADW;AAEpBY,EAAAA,UAAU,EAAEH;AAFQ,CAAP,CAAf;AAKA;;;;;AAIAV,MAAM,CAACc,GAAP,CAAW,GAAX,EAAgBC,eAAhB,E,CACA;;AACA;;;;AAGAf,MAAM,CAACgB,IAAP,CAAY,GAAZ,EAAiBJ,MAAM,CAACK,MAAP,CAAc,UAAd,CAAjB,EAA4CC,mBAA5C,EAAqDC,kBAArD;AACAnB,MAAM,UAAN,CAAc,OAAd,EAAuBoB,+BAAvB;AACApB,MAAM,CAACc,GAAP,CAAW,MAAX,EAAmBO,oBAAnB;AACArB,MAAM,UAAN,CAAc,MAAd,EAAsBsB,uBAAtB;AACAtB,MAAM,CAACuB,GAAP,CAAW,WAAX,EAAwBC,eAAxB;AACAxB,MAAM,CAACuB,GAAP,CAAW,aAAX,EAA0BE,iBAA1B,E,CACA;;eACezB,M","sourcesContent":["/**\n * @fileOverview it contains all the post routes for the application\n * @author brian omondi\n * @version 0.0.1\n */\n\nimport { Router } from \"express\";\nconst router = Router();\n\nimport blocked from \"../middleware/blocked.middleware\";\nimport multer, { diskStorage } from \"multer\";\nimport {\n  getChats,\n  makeNewChat,\n  getSingleChat,\n  deleteSingleConversation,\n  deleteSingleChat,\n  likeChat,\n  markAsRead,\n  getNewChats\n} from \"../controller/chats.controller\";\n\nconst storage = diskStorage({\n  destination: (req, file, cb) => {\n    cb(null, \"uploads/\");\n  },\n  filename: (req, file, cb) => {\n    cb(null, Date.now() + \"_\" + file.originalname);\n  }\n});\nconst filefilter = (req, file, cb) => {\n  if (file.mimetype === \"image/jpeg\" || file.mimetype === \"image/png\") {\n    cb(null, true);\n  } else {\n    cb(null, false);\n  }\n};\n\n/**@constant */\nconst upload = multer({\n  storage: storage,\n  fileFilter: filefilter\n});\n\n/**\n * get chats route\n * calls the getChat route handler\n */\nrouter.get(\"/\", getChats);\n// router.get('/',getNewChats);\n/**make chats route\n * calls the makeNewChat route handler\n */\nrouter.post(\"/\", upload.single(\"imageUrl\"), blocked, makeNewChat);\nrouter.delete(\"/conv\", deleteSingleConversation);\nrouter.get(\"/:id\", getSingleChat);\nrouter.delete(\"/:id\", deleteSingleChat);\nrouter.put(\"/likeChat\", likeChat);\nrouter.put(\"/markAsRead\", markAsRead);\n//todo:add the isLiked and isRead route\nexport default router;\n"],"file":"chat.routes.js"}